<!DOCTYPE html>
<html lang="en">

<head>
  <title>Promisifying Functions</title>
</head>

<body>
  <script>

    /*
      How to use promises when only callbacks are used.

      An example using Navigator.geolocation* which is an older API that
      is callback based.

        *The Navigator.geolocation read-only property returns a Geolocation
        object that gives Web content access to the location of the device.
        This allows a Web site or app to offer customized results based on the
        user's location.
    */

    // How it is used now with callbacks
    // navigator.geolocation.getCurrentPosition(function(pos) {
    //   console.log("Allowed");
    //   console.log(pos);
    // }, function(err) {
    //     console.log("Request denied!");
    //     console.log(err);
    // });

    // Promisify
      function getCurrentPosition() { // func name same as method
        return new Promise((resolve, reject) => {
          navigator.geolocation.getCurrentPosition(resolve, reject);
        });
      }

      async function go() {
        console.log("Starting...");
        const pos = await getCurrentPosition();
        console.log(pos);
        console.log("Finished.");
      }

      go();

  </script>
</body>

</html>